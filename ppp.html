<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cgv: ppp, the pre-pre-processor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cgv
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ppp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using Internal Build System (Windows only) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Introduction to ppp</h1>
<p>ppp was originally developed to extend the functionallity of the C++ preprocessor. This was done by embedding special commands inside a preheader file with extension *.ph and then transforming the preheader to a real header file interpreting the special commands. ppp (speek tripel-p) has its name from the three 'p's in the word pre-preprocessor.</p>
<p>The embedding of special commands inside a text document proved useful for other applications too and in this way ppp was also used to transform template files based on previously collected information into target files. This template transformation process is applied for</p><ul>
<li>makefile generation</li>
<li>source code generation for type reflection as described in later sections.</li>
</ul>
<h1><a class="anchor" id="motivation"></a>
Motivation for usage of another preprocessor</h1>
<p>If possible it would be best to avoid custom build tools whereever possible. ppp has been implemented to develop repetitive code needed in template programming, where looping is necessary. The C++ pre-processor can be used for this purpose also but the resulting code is incomprehensible, it does not work together with debuggers and documentation tools like doxygen do neither work.</p>
<h1><a class="anchor" id="user_guide"></a>
User Guide</h1>
<h2><a class="anchor" id="Command"></a>
Line and Custom Build Rules</h2>
<p>The source code of ppp is located in <code>"$(CGV_DIR)/tool/ppp"</code>. A precompiled executable is provided for windows and located in <code>"$(CGV_DIR)/bin/ppp.exe"</code>. ppp can be invoked in two ways:</p><ul>
<li>to process one file into another <div class="fragment"><div class="line">ppp.exe [-name=value]* source-file target-file</div>
</div><!-- fragment --></li>
<li>to get information from one file and use this to transform one or several template files into target files. <div class="fragment"><div class="line">ppp.exe [-name=value]* source-file [<span class="keyword">template</span>-file target-file]+</div>
</div><!-- fragment --> In both cases one can specify variable definitions marked by a minus sign. When several template files are transformed to several target files, the variable definitions are parsed once before each processing of a template file.</li>
</ul>
<p>Used extensions for ppp input files:</p><ul>
<li><code>".ph"</code> ... for pre-header files that are used to generate code</li>
<li><code>".ppp"</code> ... files that are used solely to configure ppp. The standard ppp configuration file is located in <code>"&lt;cgv/config/ppp.ppp&gt;"</code>.</li>
<li><code>".hh"</code> ... header files of classes that uses the automatic type reflection mechanism</li>
<li><code>".pj"</code> ... project files used for make file generation</li>
<li><code>".tm"</code> ... template files</li>
</ul>
<p>For the visual studio development environment, custom build rules are defined for ".ph", ".hh" and ".pj" files. The custom rule files are located in the folder <code>"$(CGV_DIR)/make/vs"</code>.</p>
<h2><a class="anchor" id="Example"></a>
Example Pre-Header File and Generated Header</h2>
<p>A simple example of the usage of ppp is given in the header abst_signal.ph which is located in the namespace <a class="el" href="namespacecgv_1_1base.html" title="the base namespace holds the base hierarchy, support for plugin registration and signals">cgv::base</a>. It contains a templated class signature representing an arbitrary signature of a functor.</p>
<p><code>cgv/base/abst_signal.ph</code>:</p>
 <div class="fragment"><div class="line">template &lt;int i, @[&quot;typename T1 = type::invalid_type&quot;; &quot;, &quot;; &quot;typename T&quot;.N_ARG.&quot; = type::invalid_type&quot;]&gt;</div>
<div class="line">struct signature;</div>
<div class="line"> </div>
<div class="line">@for (i=0; i&lt;=N_ARG; i=i+1) @{</div>
<div class="line"> </div>
<div class="line">template &lt;@[&quot;typename T1&quot;; &quot;, &quot;; &quot;typename T&quot;.N_ARG]&gt;</div>
<div class="line">struct signature&lt;@(i),@[&quot;T1&quot;; &quot;, &quot;; &quot;T&quot;.N_ARG]&gt;</div>
<div class="line">{</div>
<div class="line">@for (j=1; j&lt;=i; j=j+1) @{</div>
<div class="line">    typedef typename type::func::make_argument&lt;T@(j)&gt;::type A@(j);</div>
<div class="line">@}</div>
<div class="line">};</div>
</div><!-- fragment --><p> All ppp commands are preceeded by a -symbol. This example includes three ppp commands:</p><ul>
<li>the <code>@exclude-command</code> includes the proceeding files but does not add a corresponding include directive in the target file (what is done by the <code>@include-command</code>). The included file ppp.ppp defines several global ppp-variables, one of them is <code>N_ARG</code> .</li>
<li>the list command <code>@</code>[...] repeats a string, i.e. <code>"typename T1"</code>, into a list separated for example by ", ". In each entry numbers in the string are incremented.</li>
<li>the <code>@</code>(...) simply writes the value of a ppp internal variable to the target file.</li>
<li>the <code>@for-commands</code> iterate everything within the ppp-block markers and </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
