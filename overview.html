<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cgv: The Computer Graphics and Visualization Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cgv
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('overview.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">The Computer Graphics and Visualization Framework </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="cgv"></a>
Basics</h1>
<p>The framework consists of several base libraries with the prefix cgv, a standard cgv_viewer and several plugins that can be loaded when starting the viewer by specifying them in the command line arguments. All plugin interfaces and the registration is handled by the cgv libraries.</p>
<p>The cgv libraries (dependencies) are</p><ul>
<li>cgv_signal ... signal mechanism and binding of functions to signals</li>
<li>cgv_utils ... helps to work with files and text and has functionality to parse text</li>
<li>cgv_type (cgv_utils) ... standardized type declaration and type reflection support</li>
<li>cgv_reflect (cgv_utils/type) ... mechanism to reflect types in C++</li>
<li>cgv_data (cgv_utils/type) ... data management such as smart pointers and data views</li>
<li>cgv_base (cgv_reflect(data/type/utils) ... registration mechanism, communication and hierarchical structures</li>
<li>cgv_math (cgv_base/type/utils) ... large collection of mostly templated math functions and solvers</li>
<li>cgv_media (cgv_base/data/type/utils) ... support for fonts, images, video and 3D data</li>
<li>cgv_gui (cgv_media/base/data/type/utils) ... abstraction of gui</li>
<li>cgv_render (cgv_gui/media/base/data/type/utils) ... rendering support with OpenGL specialization</li>
<li>cgv_os ... basic operating system support (threads, sockets)</li>
</ul>
<p>Deprecated is the cgv library that includes all of the above components in one library.</p>
<h1><a class="anchor" id="platforms"></a>
Supported Platforms</h1>
<p>Currently the following system configurations are supported</p><ul>
<li>Windows XP / Vista<ul>
<li>Microsoft Visual Studio<ul>
<li>Visual Studio 2005 (abbreviated by vs8)</li>
<li>Visual Studio 2008 (abbreviated by vs9)</li>
<li>Visual Studio 2008 Express (abbreviated by vs9e)</li>
<li>Visual Studio 2010 (abbreviated by vs10)</li>
<li>Visual Studio 2013 (abbreviated by vs12)</li>
<li>Visual Studio 2015 (abbreviated by vs14)</li>
<li>Visual Studio 2017 (abbreviated by vs141)</li>
<li>Visual Studio 2019 (abbreviated by vs142)</li>
</ul>
</li>
<li>CMake</li>
</ul>
</li>
<li>Linux<ul>
<li>CMake</li>
</ul>
</li>
</ul>
<p>Under windows all compilers can be used at the same time. The postfix "_8", "_9", "_9e", "_10", "_12", "_14", "_141" is used for applications and libraries to distinguish the versions. For example "cgv_viewer_12.exe" loads "cgv_12.dll" and "cgv_viewer_14.exe" loads "cgv_14.dll" on startup.</p>
<h1><a class="anchor" id="configs"></a>
Configurations</h1>
<p>For building libraries, plugins, and applications there are four configurations, which are distinguished by extending the compiler postfix. In the following list the cgv internal name of the configuration is given followed by configuration name in vs14 and the full name of the cgv dll with all postfixes that are used in the same way for all other libraries and applications</p><ul>
<li>shared release (Release Dll) cgv_14.dll</li>
<li>shared debug (Debug Dll) cgv_d14.dll</li>
<li>static release (Release) cgv_s14.dll</li>
<li>static debug (Debug) cgv_ds14.dll</li>
</ul>
<p>The build system also allows to build an executable from a plugin which is then typed application_plugin. In this case there are two more build configurations "Release Exe" and "Debug Exe", which both build a statically linked executable. The project of an application_plugin must have an application - typically the cgv_viewer - as dependent project. The source files of the dependent application project are added to the project of the application_plugin and built only in the "Exe"-configurations.</p>
<h1><a class="anchor" id="plugins"></a>
Plugins</h1>
<p>A plugin can register instances or factories of newly implemented classes. The new classes are derived from interface class declared in the cgv libraries as for example <a class="el" href="classcgv_1_1render_1_1drawable.html" title="base class for all drawables, which is independent of the used rendering API.">cgv::render::drawable</a>. Registration is typically done in the constructor of a static dummy variable of special template types that do nothing else but register an object or a factory. When the plugin is compiled to a dll the registration code is executed when the dll is loaded.</p>
<h1><a class="anchor" id="directories"></a>
Directory Tree</h1>
<p>The framework is provided through <a href="https://github.com/sgumhold/cgv.git">https://github.com/sgumhold/cgv.git</a>. Use the master branch by default. The framework consists of the following tree of sub directories:</p><ul>
<li>3rd ... 3rd party libraries conditioned for the cgv framework currently including ANN, fltk, glew, jpeg, png, pthread (deprecated), tiff, openvr, webserver, zlib.</li>
<li>apps ... applications currently including the cgv_viewer</li>
<li>tool ... different tools necessary for compilation: res_prep (conversion of resource files into source files), ppp_tool (preprocessing of header files and makefile generation), shader_test (compilation of shader codes and programs), display (tool to adjust display settings - Windows only)</li>
<li>bin ... binaries and scripts (ppp, generate_makefile)</li>
<li>cgv ... set of core libraries<ul>
<li>base ... basic class hierarchy, support for plugin framework, basic communication classes for signals and rebinding of functions</li>
<li>config ... configuration for ppp and different platforms</li>
<li>data ... data management like ref_ptr and formated data</li>
<li>defines ... basic helpers for macro programming</li>
<li>gui ... abstracted gui framework based on a driver concept. Currently, only a fltk driver is available in the plugin cg_fltk.</li>
<li>math ... template classes for math, mostly linear algebra</li>
<li>media ... support for different media types<ul>
<li>font ... interface for font server and font faces (use gui plugin like cg_fltk)</li>
<li>image ... interfaces and driver plugin mechanism for image reader and writer with bmp support (use the cmi_io plugin)<ul>
<li>illum ... light source and material data structures</li>
<li>mesh ... simple mesh data structure for static and streaming meshes, marching cubes, dual contouring, obj reader</li>
</ul>
</li>
<li>video ... interfaces and driver plugin mechanism for video reader and writer (use the cmv_avi plugin under windows)</li>
</ul>
</li>
<li>os ... support for threads, mutexes, system clipboard, display, sockets and simple webserver</li>
<li>reflect ... simple to use self reflection mechanism (use library cgv/libs/cgv_reflect_types for implementation of self for most important types defined in cgv core libraries)</li>
<li>render ... abstracted interface for GPU programming (use with library cgv/libs/cgv_gl for OpenGL implementation of interfaces)</li>
<li>signal ... signal mechanism and binding of functions to signals</li>
<li>type ... support for compile time information about types</li>
<li>utils ... utility functions for handling files, processing text, bit operations, simple progression on the console, stop watch and incremental statistics computation</li>
</ul>
</li>
<li>doc ... source for related pages of documentation</li>
<li>make ... makefiles, currently support for cmake and different versions of visual studio via the built in ppp build chain</li>
<li>libs<ul>
<li>ann_wrapper ... C++-wrapper to ann library</li>
<li>cgv_gl ... implementation of interfaces in cgv_render for OpenGL</li>
<li>cgv_reflect_types ... implementation of type reflection according to cgv_reflect for most important types of cgv core libraries</li>
<li>cgv_win32 .. preliminary implementation of some windows specific gui features</li>
<li>delaunay ... template based implementation of point insertion algorithm for computation of delaunay triangulations</li>
<li>glsu ... support library to set up stereo renderung</li>
<li>multi_mouse ... support to access several mouse devices in parallel (windows only)</li>
<li>plot ... library to draw plots of 1D and 2D functions</li>
<li>ppp ... script engine used for ppp source and makefile file processing tool</li>
<li>gamepad ... library to access gamepad devices</li>
<li>cg_gamepad ... library that provides a gamepad_server that emits events from gamepad devices</li>
<li>space_pilot ... library to access space pilot devices</li>
<li>vr ... basic vr support without further dependencies</li>
<li>cg_vr ... library that provides a vr_server that emits events from vr devices</li>
</ul>
</li>
<li>plugins ... commonly used plugins<ul>
<li>cg_fltk ... plugin that implements the abstract gui framework</li>
<li>cg_icons ... icon resources</li>
<li>cg_multi_mouse ... adds multi-mouse events to handle cg_fltk gui</li>
<li>cmi_io ... support for image io</li>
<li>cmv_avi ... support for video io through avi files</li>
<li>crg_view ... provides mouse interaction for the opengl view in the cgv_viewer</li>
<li>crg_planar_view ... variant of crg_view where only 2d navigation is possible</li>
<li>crg_spherical_view ... variant of crg_view with a spherical coordinate system</li>
<li>crg_stereo_view ... provides mouse interaction for a stereoscopic opengl view</li>
<li>crg_grid ... renders a grid</li>
<li>crg_antialias ... supports jitter based antialiasing</li>
<li>crg_depth_of_field ... supports rendering with depth of field</li>
<li>crg_light ... provides gui to adjust light sources</li>
<li>examples ... different example classes that illustrate the cgv framework</li>
<li>openvr_driver ... openvr api driver for the vr library</li>
<li>vr_emulator ... plugin that provides vr_kit emulation</li>
<li>crg_vr_view ... extends crg_stereo_view with support to render to vr_kit hmds</li>
<li>vr_test ... sample plugin that shows how to use vr kits</li>
</ul>
</li>
<li>test ... test sources for different parts of the framework that also serve as examples</li>
</ul>
<h1><a class="anchor" id="viewer"></a>
Usage of the cgv_viewer</h1>
<p>The cgv_viewer can load plugins after start up. It parses the command line arguments with the help of the function <a class="el" href="namespacecgv_1_1base.html#ab9656474bcbb2a4b09c8e557a1e5621c" title="process the command line arguments: extract program name and load all plugins">cgv::base::process_command_line_args</a> declared in the header <a class="el" href="register_8h_source.html">cgv/base/register.h</a>. This function simply calls the <a class="el" href="namespacecgv_1_1base.html#a3db812e195f6d3578be37667b1370ff5" title="process a command given by a command info structure, return whether command was processed correctly">cgv::base::process_command</a> function for each argument. The command syntax is explained in the documentation of this function.</p>
<p>A plugin can register objects, object factories and registration listeners. Object and factory registration events are delayed until all plugins have been read. Then all registration events are sent to all registered listeners, such that the order in which the plugins are read is not important.</p>
<p>After startup the viewer provides a main menu that can be extended by the plugins, a 3d view and a tab group with guis for registered object instances, which is only shown if there is at least one registered object instance that provides a gui.</p>
<p>In the main menu the item "new" is meant for entries of factories that create new object instances. A factory can be tagged singleton, in which case only one instance can be created. There is also a shortcut assigned to each factory, for example &lt;Ctrl-Q&gt;. If pressed, a new object instance is created. In case of a singleton factory, pressing the shortcut again will toggle visibility of the object instance in the 3d view and select its gui in the tab group of guis.</p>
<h1><a class="anchor" id="configFiles"></a>
Configuration Files</h1>
<p>The registration facility and the property interface of the cgv framework as described on page <a class="el" href="baseNS.html">Namespace cgv::base</a> is exploited to support configuration files. A configuration file is passed to the viewer with the command syntax config:"file_name". The use of quotes is important when the file path contains spaces. To add the config command line argument in a project file use the <code>addCommandLineArgs</code> define (see <a class="el" href="install.html#makegen">Internal Makefiles (Windows only)</a>).</p>
<p>Config files are user specific and should therefore not be checked into the svn repository. Therefore, a twofold strategy is realized based on a default config file and a user specific. The default file is checked into the svn repository and has the extension <code>".def"</code>. It will be specified in -c config:-commands to the viewer and is always available from the svn repository. The user can copy the default file into a file with the same name but the extension <code>".cfg"</code> and specify his user specific configuration there. The viewer will first check for the existence of the <code>".cfg"</code> file and if present read this instead of the default file.</p>
<p>The syntax of the config file is very simple. Lines that start with a <code>'/'</code> are comments. Empty lines are ignored. Lines that contain configuration information are processed with the <a class="el" href="namespacecgv_1_1base.html#a3db812e195f6d3578be37667b1370ff5" title="process a command given by a command info structure, return whether command was processed correctly">cgv::base::process_command</a> function. Let us explain the most important commands with a simple example config file </p><div class="fragment"><div class="line">/ <span class="keyword">this</span> is a comment</div>
<div class="line">show all</div>
<div class="line"> </div>
<div class="line">name(<a class="code" href="namespacecgv.html">cgv</a> 3d viewer):x=4;y=30;w=1024;h=768</div>
<div class="line">type(graphical_text_interpreter):x=1032;y=30;w=592;h=768</div>
<div class="line">name(gti):file_name=<span class="stringliteral">&quot;D:\Projects\project\gti\examples\examples.dcr&quot;</span></div>
<div class="line"> </div>
<div class="line">persistent</div>
<div class="line">name(stereo interactor):view_dir_x=?;view_dir_y=?;view_dir_z=?</div>
<div class="line"> </div>
<div class="line">initial</div>
<div class="line">name(stereo interactor):extent=2</div>
<div class="ttc" id="anamespacecgv_html"><div class="ttname"><a href="namespacecgv.html">cgv</a></div><div class="ttdoc">the cgv namespace</div><div class="ttdef"><b>Definition:</b> vr_calib.cxx:9</div></div>
</div><!-- fragment --><p>There are two possibilities to address registered objects in a config file:</p><ul>
<li>by name ... with the syntax <code>name(gti)</code> followed by a colon. This is supported only for objects derived from <a class="el" href="classcgv_1_1base_1_1named.html" title="base class for all gui types">cgv::base::named</a> and the name is matches against <a class="el" href="classcgv_1_1base_1_1named.html#ad647d5c457d7a25ad907b062fd9ca36a" title="return the parent node">cgv::base::named::get_name()</a>.</li>
<li>by type ... with the syntax <code>type(graphical_text_interpreter)</code> followed by a colon. This makes sense only for singleton objects. The type is matched against <a class="el" href="classcgv_1_1base_1_1base.html#a6e64a898476591f7246e522652abfa4c" title="overload to return the type name of this object. By default the type interface is queried over get_ty...">cgv::base::base::get_type_name()</a>. The rest of each line after the colon, a semicolon separated list of member assignments follows. This is passed to the <a class="el" href="classcgv_1_1base_1_1base.html#afbfaded48bb322a4b77350ca73c9e1a2" title="set several properties">cgv::base::base::multi_set()</a> method. Strings can be enclosed with single or double quotes. If a quote is part of the string, one can use the backslash as escape character. A backslash is either referenced by a double backslash inside a quoted string or if not followed by the enclosing quote symbol, also by a single backslash - as for example in the file name assignment in the above sample.</li>
</ul>
<p>There are two modes to set members of registered objects in the config file:</p><ul>
<li>initial ... the value is set once when the config file is read</li>
<li>persistent ... the value is set when the config file is read and the config file is updated whenever the value is changed. This allows to make the current values of selected members persistent over several runs of the application. Only members that are reflected inside the cgv::base::self_reflect method are supported for persistent configuration. At the beginning of a config file the default mode is <code>initial</code>. The special config file lines <code>persistent</code> and <code>initial</code> change the mode for the successive entries of the config file. When a member is configured persistently and the question mark <code></code>? is assigned to a member, the initial value set by the application is kept and written to the config file after the first run of the application.</li>
</ul>
<p>The line <code>"show all"</code> is a special command that will cause the viewer to print out all registered objects and their properties to the console window. In this way one can find out all objects that can be configured. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
